"use strict";(self.webpackChunkenglish_flashcards=self.webpackChunkenglish_flashcards||[]).push([[552],{2836:(t,e,s)=>{s.d(e,{n:()=>m});var n=s(2555),r=s(5043),i=s(8664),a=s(116),o=s(9939),c=s(2078);class u extends c.Q{constructor(t,e){super(),this.client=t,this.setOptions(e),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var e;const s=this.options;this.options=this.client.defaultMutationOptions(t),(0,i.f8)(s,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(e=this.currentMutation)||e.setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(null==(t=this.currentMutation)||t.removeObserver(this))}onMutationUpdate(t){this.updateResult();const e={listeners:!0};"success"===t.type?e.onSuccess=!0:"error"===t.type&&(e.onError=!0),this.notify(e)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(t,e){return this.mutateOptions=e,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,(0,n.A)((0,n.A)({},this.options),{},{variables:"undefined"!==typeof t?t:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const t=this.currentMutation?this.currentMutation.state:(0,a.$)(),e="loading"===t.status,s=(0,n.A)((0,n.A)({},t),{},{isLoading:e,isPending:e,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset});this.currentResult=s}notify(t){o.j.batch(()=>{var e,s,n,r;if(this.mutateOptions&&this.hasListeners())if(t.onSuccess)null==(e=(s=this.mutateOptions).onSuccess)||e.call(s,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(n=(r=this.mutateOptions).onSettled)||n.call(r,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context);else if(t.onError){var i,a,o,c;null==(i=(a=this.mutateOptions).onError)||i.call(a,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(o=(c=this.mutateOptions).onSettled)||o.call(c,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}t.listeners&&this.listeners.forEach(t=>{let{listener:e}=t;e(this.currentResult)})})}}var l=s(8873),d=s(9781),h=s(4084);function m(t,e,s){const a=(0,i.GR)(t,e,s),c=(0,d.jE)({context:a.context}),[m]=r.useState(()=>new u(c,a));r.useEffect(()=>{m.setOptions(a)},[m,a]);const g=(0,l.r)(r.useCallback(t=>m.subscribe(o.j.batchCalls(t)),[m]),()=>m.getCurrentResult(),()=>m.getCurrentResult()),f=r.useCallback((t,e)=>{m.mutate(t,e).catch(p)},[m]);if(g.error&&(0,h.G)(m.options.useErrorBoundary,[g.error]))throw g.error;return(0,n.A)((0,n.A)({},g),{},{mutate:f,mutateAsync:g.mutate})}function p(){}},4834:(t,e,s)=>{s.d(e,{e:()=>n});const n={WORDS:["words"],WORDS_FULL:["wordsFull"],TRAIN_WORDS:["trainWords"],VOCAB_WORDS:["vocabWords"]}},5207:(t,e,s)=>{s.d(e,{Kk:()=>u,KW:()=>l,I0:()=>h,qi:()=>m,ob:()=>d});var n=s(2555),r=s(9722);function i(t){try{return JSON.parse(localStorage.getItem(t))||[]}catch(e){return[]}}function a(t,e){localStorage.setItem(t,JSON.stringify(e))}const o="https://itgirlschool.justmakeit.ru/api",c="addedWords",u="deletedWords";async function l(t){const e=await function(t){return r.A.post("".concat(o,"/words"),t).then(t=>t.data)}(t),s="number"===typeof e.id?e.id:"local-".concat(Date.now()),u=(0,n.A)({id:s},t),l=i(c);return a(c,[...l,u]),u}async function d(t){const e=await function(t){return r.A.put("".concat(o,"/words/").concat(t.id),t).then(t=>t.data)}(t),s="number"===typeof e.id?e.id:t.id,u=(0,n.A)({id:s},t),l=i(c).filter(t=>String(t.id)!==String(s));return a(c,[...l,u]),u}async function h(t){String(t).startsWith("local-")||await function(t){return r.A.delete("".concat(o,"/words/").concat(t))}(t);const e=i(c).filter(e=>String(e.id)!==String(t));a(c,e);const s=i(u);return s.includes(String(t))||a(u,[...s,String(t)]),t}async function m(){const t=await r.A.get("".concat(o,"/words")).then(t=>t.data),e=i(u),s=i(c),n=t.filter(t=>!e.includes(String(t.id)));return[...n.map(t=>s.find(e=>String(e.id)===String(t.id))||t),...s.filter(t=>!n.find(e=>String(e.id)===String(t.id)))]}},5552:(t,e,s)=>{s.r(e),s.d(e,{default:()=>b});var n=s(5043),r=s(5604),i=s(4834),a=s(5207),o=s(9781),c=s(2836);var u=s(2555);const l="WordRow_row__4-rHQ",d="WordRow_input__dVTgS",h="WordRow_errorInput__SwX5M",m="WordRow_actions__9BBdR",p="WordRow_button__vftN3";var g=s(579);function f(t){var e;let{word:s,onSave:r,onDelete:i}=t;const[a,o]=(0,n.useState)(!1),[c,f]=(0,n.useState)(s),v=a&&!c.english.trim(),x=a&&!c.transcription.trim(),R=a&&!c.russian.trim(),S=a&&!(null!==(e=c.tags)&&void 0!==e&&e.trim());(0,n.useEffect)(()=>{a&&f(s)},[a,s]);const j=t=>{const{name:e,value:s}=t.target;f(t=>(0,u.A)((0,u.A)({},t),{},{[e]:s}))},b=()=>{v||x||R?alert("\u041e\u0448\u0438\u0431\u043a\u0430: \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f \u043f\u0435\u0440\u0435\u0434 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435\u043c"):(console.log("\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043e \u0441\u043b\u043e\u0432\u043e:",c),r(c),o(!1))},y=t=>{"Enter"===t.key&&(t.preventDefault(),b())};return(0,g.jsx)("tr",{className:l,children:a?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("td",{children:(0,g.jsx)("input",{name:"english",value:c.english,onChange:j,onKeyDown:y,className:"".concat(d," ").concat(v?h:"")})}),(0,g.jsx)("td",{children:(0,g.jsx)("input",{name:"transcription",value:c.transcription,onChange:j,onKeyDown:y,className:"".concat(d," ").concat(x?h:"")})}),(0,g.jsx)("td",{children:(0,g.jsx)("input",{name:"russian",value:c.russian,onChange:j,onKeyDown:y,className:"".concat(d," ").concat(R?h:"")})}),(0,g.jsx)("td",{children:(0,g.jsx)("input",{name:"tags",value:c.tags||"",onChange:j,onKeyDown:y,className:"".concat(d," ").concat(S?h:"")})}),(0,g.jsxs)("td",{className:m,children:[(0,g.jsx)("button",{onClick:b,className:p,disabled:v||x||R,children:"\ud83d\udcbe"}),(0,g.jsx)("button",{onClick:()=>{o(!1),f(s)},className:p,children:"\u274c"})]})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("td",{children:s.english}),(0,g.jsx)("td",{children:s.transcription}),(0,g.jsx)("td",{children:s.russian}),(0,g.jsx)("td",{children:s.tags}),(0,g.jsxs)("td",{className:m,children:[(0,g.jsx)("button",{onClick:()=>o(!0),className:p,children:"\u270f\ufe0f"}),(0,g.jsx)("button",{onClick:i,className:p,children:"\ud83d\uddd1"})]})]})})}var v=s(6232);const x="WordList_table__9l5tk";function R(){const{deleteWord:t,updateWord:e}=function(){const t=(0,o.jE)(),e=(0,c.n)({mutationFn:a.I0,onSuccess:()=>{t.invalidateQueries({queryKey:i.e.WORDS_FULL}),t.invalidateQueries({queryKey:i.e.TRAIN_WORDS}),t.invalidateQueries({queryKey:i.e.VOCAB_WORDS})}}),s=(0,c.n)({mutationFn:a.ob,onSuccess:()=>{t.invalidateQueries({queryKey:i.e.WORDS_FULL}),t.invalidateQueries({queryKey:i.e.TRAIN_WORDS}),t.invalidateQueries({queryKey:i.e.VOCAB_WORDS})}});return{deleteWord:e.mutate,updateWord:s.mutate,isDeleting:e.isLoading,isUpdating:s.isLoading,deleteError:e.error,updateError:s.error}}(),{data:s=[],isLoading:n}=(0,r.I)({queryKey:i.e.WORDS_FULL,queryFn:a.qi,staleTime:3e5,refetchOnWindowFocus:!1});return n?(0,g.jsx)(v.A,{}):(0,g.jsxs)("table",{className:x,children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{children:"\u0421\u043b\u043e\u0432\u043e"}),(0,g.jsx)("th",{children:"\u0422\u0440\u0430\u043d\u0441\u043a\u0440\u0438\u043f\u0446\u0438\u044f"}),(0,g.jsx)("th",{children:"\u041f\u0435\u0440\u0435\u0432\u043e\u0434"}),(0,g.jsx)("th",{children:"\u0422\u0435\u043c\u0430"}),(0,g.jsx)("th",{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})]})}),(0,g.jsx)("tbody",{children:s.map(s=>(0,g.jsx)(f,{word:s,onDelete:()=>t(s.id),onSave:t=>e(t)},s.id))})]})}const S="HomePage_homePage__FhwvF",j="HomePage_title__ygULj";const b=function(){return(0,g.jsxs)("div",{className:S,children:[(0,g.jsx)("h2",{className:j,children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0441\u043b\u043e\u0432"}),(0,g.jsx)(R,{})]})}}}]);
//# sourceMappingURL=552.53670040.chunk.js.map