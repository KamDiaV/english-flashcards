"use strict";(self.webpackChunkenglish_flashcards=self.webpackChunkenglish_flashcards||[]).push([[347],{8347:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var r=n(5043),s=n(5604),a=n(5180),i=n(9766),o=n(3546),l=n(5487),c=n(9781),d=n(8659);const u={cardWrapper:"WordCard_cardWrapper__jHn87",flipIcon:"WordCard_flipIcon__dKwrp",card:"WordCard_card__jVwgg",isFlipped:"WordCard_isFlipped__ACnbb",cardFront:"WordCard_cardFront__tkZO+",cardBack:"WordCard_cardBack__iZQ0q",english:"WordCard_english__5kBOo",transcription:"WordCard_transcription__YMEiV",translation:"WordCard_translation__xCCyt"};var g=n(579);function p(e){let{english:t,transcription:n,russian:s}=e;const[a,i]=(0,r.useState)(!1),o=(0,r.useRef)(null);(0,r.useEffect)((()=>{!a&&o.current&&o.current.focus()}),[t,n,a]);const l=e=>{e.stopPropagation(),i((e=>!e))};return(0,g.jsx)("div",{className:u.cardWrapper,onClick:()=>i((e=>!e)),children:(0,g.jsxs)("div",{className:`${u.card} ${a?u.isFlipped:""}`,children:[(0,g.jsxs)("div",{className:u.cardFront,children:[(0,g.jsx)("p",{className:u.english,children:t}),(0,g.jsx)("p",{className:u.transcription,children:n}),(0,g.jsx)("span",{ref:o,className:u.flipIcon,onClick:l,role:"button",tabIndex:0,"aria-label":"Flip card",onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),l(e))},children:"\ud83d\udd04"})]}),(0,g.jsxs)("div",{className:u.cardBack,children:[(0,g.jsx)("p",{className:u.translation,children:s}),(0,g.jsx)("span",{className:u.flipIcon,onClick:l,role:"button",tabIndex:0,"aria-label":"Flip card back",children:"\ud83d\udd04"})]})]})})}const _={container:"FlipCardGame_container__9peXM",cardWrapper:"FlipCardGame_cardWrapper__e66if",cardMotion:"FlipCardGame_cardMotion__ovtHr",learnedCounter:"FlipCardGame_learnedCounter__QZj3u",checkButton:"FlipCardGame_checkButton__427CO",controls:"FlipCardGame_controls__-ewaO",status:"FlipCardGame_status__0RBR1"};function m(e){var t;let{words:n}=e;const s=(0,c.jE)(),[a,i]=(0,r.useState)(0),[u,m]=(0,r.useState)(1),[h,f]=(0,r.useState)(!1),[x,S]=(0,r.useState)(0),N=Array.isArray(n)&&n.length?Math.min(a,n.length-1):0,k=Array.isArray(n)&&n.length?n[N]:{id:null,english:"",transcription:"",russian:""},[j,C]=(0,d.p)(null!==(t=k.id)&&void 0!==t?t:""),v=(0,r.useCallback)((()=>{null!==n&&void 0!==n&&n.length&&0!==N&&(m(-1),i((e=>e-1)))}),[N,n]),w=(0,r.useCallback)((()=>{null!==n&&void 0!==n&&n.length&&N!==n.length-1&&(m(1),i((e=>e+1)))}),[N,n]);(0,r.useEffect)((()=>{function e(e){"ArrowLeft"===e.key?(e.preventDefault(),v()):"ArrowRight"===e.key&&(e.preventDefault(),w())}return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[v,w]);return(0,g.jsx)("div",{className:_.container,children:null!==n&&void 0!==n&&n.length?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:_.learnedCounter,children:["\u0412\u044b\u0443\u0447\u0435\u043d\u043e \u0441\u043b\u043e\u0432 \u0437\u0430 \u044d\u0442\u0443 \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0443: ",(0,g.jsx)("strong",{children:x})]}),(0,g.jsx)("div",{className:_.cardWrapper,children:(0,g.jsx)(o.N,{initial:!1,custom:u,children:(0,g.jsx)(l.P.div,{custom:u,variants:{enter:e=>({rotateY:e>0?90:-90,opacity:0,transformOrigin:e>0?"left center":"right center"}),center:{rotateY:0,opacity:1,transformOrigin:"center center",transition:{duration:.5}},exit:e=>({rotateY:e>0?-90:90,opacity:0,transformOrigin:e>0?"right center":"left center",transition:{duration:.4}})},initial:"enter",animate:h?"exit":"center",exit:"exit",transition:{duration:.5},className:_.cardMotion,children:(0,g.jsx)(p,{english:k.english,transcription:k.transcription,russian:k.russian})},k.id)})}),(0,g.jsx)("button",{className:_.checkButton,onClick:function(){C({knownByUser:!0}),s.invalidateQueries(["trainWords"]),s.invalidateQueries(["vocabWords"]),f(!0),S((e=>e+1)),setTimeout((()=>{f(!1),w()}),500)},disabled:h,children:"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043a\u0430\u043a \u0437\u043d\u0430\u044e"}),(0,g.jsxs)("div",{className:_.controls,children:[(0,g.jsx)("button",{onClick:v,disabled:0===N,children:"\u2190"}),(0,g.jsx)("button",{onClick:w,disabled:N===n.length-1,children:"\u2192"})]})]}):(0,g.jsx)("p",{className:_.status,children:"\u041d\u0435\u0442 \u0441\u043b\u043e\u0432 \u0434\u043b\u044f \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0438."})})}function h(e){return e.map((e=>({sort:Math.random(),value:e}))).sort(((e,t)=>e.sort-t.sort)).map((e=>e.value))}function f(e){const t=(0,c.jE)(),[n,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(null),[u,g]=(0,r.useState)(null),[p,_]=(0,r.useState)(null),[m,f]=(0,r.useState)("en-ru"),{data:x=[],isLoading:S,isError:N}=(0,s.I)(["wordsFull"],i.qi,{refetchOnWindowFocus:!1,staleTime:3e5}),{empty:k,safeIndex:j,word:C,currentId:v,next:w,reset:y}=function(e){var t;const[n,s]=(0,r.useState)(0),a=!Array.isArray(e)||0===e.length,i=a?0:Math.min(n,e.length-1),o=a?null:e[i],l=null!==(t=null===o||void 0===o?void 0:o.id)&&void 0!==t?t:null;return(0,r.useEffect)((()=>{s(0)}),[e]),{safeIndex:i,word:o,currentId:l,next:()=>{a||s((t=>t<e.length-1?t+1:t))},reset:()=>{s(0)},empty:a}}(e);(0,r.useEffect)((()=>{a(!1),l(null),g(null),_(null)}),[v]);const[b,I]=(0,d.p)(v),{correctStreak:T=0,knownByUser:A=!1}=b,{options:B,correctAnswer:O}=function(e,t,n,s){return(0,r.useMemo)((()=>{if(!Array.isArray(t)||0===t.length||n<0||n>=t.length)return{options:[],correctAnswer:null};const r=t[n];if(!r||!Array.isArray(e)||0===e.length)return{options:[],correctAnswer:null};const a=h(e.filter((e=>e.id!==r.id)).map((e=>"en-ru"===s?e.russian:e.english))).slice(0,3),i="en-ru"===s?r.russian:r.english;return{options:h([i,...a]),correctAnswer:i.toLowerCase()}}),[e,t,n,s])}(x,e,j,m),W=(0,r.useCallback)((()=>{g(null),_(null),a(!1),l(null)}),[]),G=(0,r.useCallback)((()=>{t.invalidateQueries({predicate:e=>["trainWords","vocabWords"].includes(e.queryKey[0])})}),[t]),E=(0,r.useCallback)((e=>{if(null!==u)return;g(e);const t=e.toLowerCase()===O;_(t);const n=t?T+1:0,r={correctStreak:n};n>=5&&(r.knownByUser=!0),I(r),t&&n>=5?(a(!0),l(n)):G()}),[u,O,T,I,G]),F=(0,r.useCallback)((()=>{n&&(a(!1),l(null),g(null),_(null),G())}),[n,G]),J=null!==o&&void 0!==o?o:T,L=Math.min(J,5);return{isLoading:S,isError:N,empty:k,word:C,safeIndex:j,direction:m,setDirection:f,options:B,correctAnswer:O,selected:u,isCorrect:p,rawCount:J,displayCount:L,celebrating:n,handleSelect:E,handleScreenClick:F,handleClearSelection:W,next:w,reset:y}}var x=n(6232);const S={container:"TestGame_container__W4QCg",toggle:"TestGame_toggle__d5eTu",active:"TestGame_active__5REuC",prompt:"TestGame_prompt__D27ei",status:"TestGame_status__yVXDb",progress:"TestGame_progress__vcjdz",options:"TestGame_options__NDWIb",correct:"TestGame_correct__afOdp",wrong:"TestGame_wrong__N3fIA",footer:"TestGame_footer__jXnw9",ok:"TestGame_ok__hxm7a",err:"TestGame_err__fUU1S",nextButton:"TestGame_nextButton__BTOoP",resetButton:"TestGame_resetButton__dw-D+",celebration:"TestGame_celebration__YTn-x",pop:"TestGame_pop__X1akE"};function N(e){const{isLoading:t,isError:n,empty:r,word:s,direction:a,setDirection:i,options:o,correctAnswer:l,selected:c,isCorrect:d,rawCount:u,displayCount:p,celebrating:_,handleSelect:m,handleScreenClick:h,next:f,reset:N,safeIndex:k,wordsLength:j,handleClearSelection:C}=e;return t?(0,g.jsx)(x.A,{}):n?(0,g.jsx)("p",{className:S.status,children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u043e\u0432"}):r||e.knownByUser&&!_?(0,g.jsx)(x.A,{}):(0,g.jsxs)("div",{className:S.container,onClick:h,children:[(0,g.jsxs)("div",{className:S.toggle,children:[(0,g.jsx)("button",{className:"en-ru"===a?S.active:"",onClick:()=>i("en-ru"),children:"\u0410\u043d\u0433\u043b \u2192 \u0420\u0443\u0441"}),(0,g.jsx)("button",{className:"ru-en"===a?S.active:"",onClick:()=>i("ru-en"),children:"\u0420\u0443\u0441 \u2192 \u0410\u043d\u0433\u043b"})]}),(0,g.jsx)("p",{className:S.prompt,children:"en-ru"===a?s.english:s.russian}),(0,g.jsxs)("div",{className:S.progress,children:[(0,g.jsx)("progress",{value:p,max:5}),(0,g.jsxs)("span",{children:[p,"/5"]})]}),(0,g.jsx)("div",{className:S.options,children:o.map((e=>(0,g.jsx)("button",{disabled:null!==c||_,onClick:t=>{t.stopPropagation(),m(e)},className:null===c?"":e.toLowerCase()===l?S.correct:e===c?S.wrong:"",children:e},e)))}),_&&(0,g.jsx)("div",{className:S.celebration,children:"\ud83c\udf89\ud83c\udf86 \u041e\u0442\u043b\u0438\u0447\u043d\u043e! \u0421\u043b\u043e\u0432\u043e \u0432\u044b\u0443\u0447\u0435\u043d\u043e! \ud83c\udf86\ud83c\udf89"}),!_&&null!==c&&(0,g.jsxs)("div",{className:S.footer,children:[(0,g.jsx)("p",{className:d?S.ok:S.err,children:d?"\u2705 \u041f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e!":`\u274c \u041d\u0435\u0432\u0435\u0440\u043d\u043e, \u043e\u0442\u0432\u0435\u0442: ${"en-ru"===a?s.russian:s.english}`}),(0,g.jsx)("button",{onClick:()=>{C(),f()},disabled:k===j-1,className:S.nextButton,children:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435 \u2192"}),k===j-1&&(0,g.jsx)("button",{onClick:()=>{C(),N()},className:S.resetButton,children:"\u041d\u0430\u0447\u0430\u0442\u044c \u0441\u043d\u0430\u0447\u0430\u043b\u0430"})]})]})}function k(e){let{words:t}=e;const n=f(t);return(0,g.jsx)(N,{...n,wordsLength:t.length})}const j={page:"TrainPage_page__AVj1k",backToMenu:"TrainPage_backToMenu__-9L1e",title:"TrainPage_title__L3Yo3",selection:"TrainPage_selection__pdbK7",largeButton:"TrainPage_largeButton__Xu2N9",status:"TrainPage_status__84YyE",emptyActions:"TrainPage_emptyActions__otEk2",linkButton:"TrainPage_linkButton__dh8CD"};async function C(){const e=await(0,i.qi)(),t=JSON.parse(localStorage.getItem("vocabProgress")||"{}"),n=JSON.parse(localStorage.getItem(i.Kk)||"[]");return e.filter((e=>{var r;return!(null!==(r=t[e.id])&&void 0!==r&&r.knownByUser)&&!n.includes(String(e.id))}))}function v(){const[e,t]=(0,r.useState)(null),{data:n=[],isLoading:i,isError:o}=(0,s.I)(["trainWords",e],C,{enabled:Boolean(e),refetchOnWindowFocus:!1,staleTime:3e5});return null===e?(0,g.jsxs)("div",{className:j.page,children:[(0,g.jsx)("h2",{className:j.title,children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u0435\u0436\u0438\u043c"}),(0,g.jsxs)("div",{className:j.selection,children:[(0,g.jsx)("button",{className:j.largeButton,onClick:()=>t("flip"),children:"\u041f\u0435\u0440\u0435\u0432\u0435\u0440\u043d\u0438 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443"}),(0,g.jsx)("button",{className:j.largeButton,onClick:()=>t("test"),children:"\u0422\u0435\u0441\u0442"})]})]}):i?(0,g.jsx)("p",{className:j.status,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043b\u043e\u0432\u2026"}):o?(0,g.jsx)("p",{className:j.status,children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435"}):0===n.length?(0,g.jsxs)("div",{className:j.page,children:[(0,g.jsx)("h2",{className:j.status,children:"\u041f\u043e\u0437\u0434\u0440\u0430\u0432\u043b\u044f\u0435\u043c, \u0432\u0441\u0435 \u0441\u043b\u043e\u0432\u0430 \u0432\u044b\u0443\u0447\u0435\u043d\u044b! \ud83c\udf89"}),(0,g.jsxs)("div",{className:j.emptyActions,children:[(0,g.jsx)(a.N_,{to:"/vocab",className:j.linkButton,children:"\u041c\u043e\u0439 \u0441\u043b\u043e\u0432\u0430\u0440\u043d\u044b\u0439 \u0437\u0430\u043f\u0430\u0441"}),(0,g.jsx)(a.N_,{to:"/add",className:j.linkButton,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430"})]})]}):(0,g.jsxs)("div",{className:j.page,children:[(0,g.jsx)("button",{className:j.backToMenu,onClick:()=>t(null),children:"\u2190 \u041d\u0430\u0437\u0430\u0434 \u043a \u0432\u044b\u0431\u043e\u0440\u0443 \u0440\u0435\u0436\u0438\u043c\u0430"}),"flip"===e?(0,g.jsx)(m,{words:n}):(0,g.jsx)(k,{words:n})]})}},8659:(e,t,n)=>{n.d(t,{R:()=>o,p:()=>i});var r=n(5043);const s="vocabProgress",a={correctStreak:0,knownByUser:!1};function i(e){const[t,n]=(0,r.useState)(a);(0,r.useEffect)((()=>{const t=JSON.parse(localStorage.getItem(s)||"{}");n(t[e]||a)}),[e]);return[t,t=>{n((n=>{const r={...n,...t},a=JSON.parse(localStorage.getItem(s)||"{}");return a[e]=r,localStorage.setItem(s,JSON.stringify(a)),r}))},()=>{n(a);const t=JSON.parse(localStorage.getItem(s)||"{}");delete t[e],localStorage.setItem(s,JSON.stringify(t))}]}function o(e){const t=JSON.parse(localStorage.getItem(s)||"{}");delete t[e],localStorage.setItem(s,JSON.stringify(t))}},9766:(e,t,n)=>{n.d(t,{I0:()=>c,KW:()=>o,Kk:()=>i,ob:()=>l,qi:()=>d});var r=n(6213);const s="https://itgirlschool.justmakeit.ru/api",a="addedWords",i="deletedWords";async function o(e){const t=await function(e){return r.A.post(`${s}/words`,e).then((e=>e.data))}(e),n={id:"number"===typeof t.id?t.id:`local-${Date.now()}`,english:e.english,transcription:e.transcription,russian:e.russian,tags:e.tags},i=JSON.parse(localStorage.getItem(a)||"[]");return localStorage.setItem(a,JSON.stringify([...i,n])),n}async function l(e){const t=await function(e){return r.A.put(`${s}/words/${e.id}`,e).then((e=>e.data))}(e),n="number"===typeof t.id?t.id:e.id,i={id:n,english:e.english,transcription:e.transcription,russian:e.russian,tags:e.tags},o=JSON.parse(localStorage.getItem(a)||"[]").filter((e=>String(e.id)!==String(n)));return localStorage.setItem(a,JSON.stringify([...o,i])),i}async function c(e){String(e).startsWith("local-")||await function(e){return r.A.delete(`${s}/words/${e}`)}(e);const t=JSON.parse(localStorage.getItem(a)||"[]").filter((t=>String(t.id)!==String(e)));localStorage.setItem(a,JSON.stringify(t));const n=JSON.parse(localStorage.getItem(i)||"[]");return n.includes(String(e))||(n.push(String(e)),localStorage.setItem(i,JSON.stringify(n))),e}async function d(){const e=await r.A.get(`${s}/words`).then((e=>e.data)),t=JSON.parse(localStorage.getItem(i)||"[]"),n=JSON.parse(localStorage.getItem(a)||"[]"),o=e.filter((e=>!t.includes(String(e.id))));return[...o.map((e=>n.find((t=>String(t.id)===String(e.id)))||e)),...n.filter((e=>!o.find((t=>String(t.id)===String(e.id)))))]}}}]);
//# sourceMappingURL=347.d00997a4.chunk.js.map