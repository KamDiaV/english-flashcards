"use strict";(self.webpackChunkenglish_flashcards=self.webpackChunkenglish_flashcards||[]).push([[205],{205:(t,e,s)=>{s.r(e),s.d(e,{default:()=>b});var n=s(43),i=s(604),r=s(766),a=s(781),o=s(836);const l="WordRow_row__DfsRx",u="WordRow_input__01GKN",c="WordRow_errorInput__d+OXt",d="WordRow_actions__DTr2H",h="WordRow_button__rXi1T";var g=s(579);function p(t){let{word:e,onSave:s,onDelete:i}=t;const[r,a]=(0,n.useState)(!1),[o,p]=(0,n.useState)(e),m=r&&!o.english.trim(),f=r&&!o.russian.trim();(0,n.useEffect)((()=>{r&&p(e)}),[r,e]);const S=t=>{const{name:e,value:s}=t.target;p((t=>({...t,[e]:s})))};return(0,g.jsx)("tr",{className:l,children:r?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("td",{children:(0,g.jsx)("input",{name:"english",value:o.english,onChange:S,className:`${u} ${m?c:""}`})}),(0,g.jsx)("td",{children:(0,g.jsx)("input",{name:"transcription",value:o.transcription,onChange:S,className:u})}),(0,g.jsx)("td",{children:(0,g.jsx)("input",{name:"russian",value:o.russian,onChange:S,className:`${u} ${f?c:""}`})}),(0,g.jsx)("td",{children:(0,g.jsx)("input",{name:"tags",value:o.tags||"",onChange:S,className:u})}),(0,g.jsxs)("td",{className:d,children:[(0,g.jsx)("button",{onClick:()=>{m||f||(s(o),a(!1))},className:h,disabled:m||f,children:"\ud83d\udcbe"}),(0,g.jsx)("button",{onClick:()=>{a(!1),p(e)},className:h,children:"\u274c"})]})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("td",{children:e.english}),(0,g.jsx)("td",{children:e.transcription||"\u2014"}),(0,g.jsx)("td",{children:e.russian}),(0,g.jsx)("td",{children:e.tags||"\u2014"}),(0,g.jsxs)("td",{className:d,children:[(0,g.jsx)("button",{onClick:()=>a(!0),className:h,children:"\u270f\ufe0f"}),(0,g.jsx)("button",{onClick:i,className:h,children:"\ud83d\uddd1"})]})]})})}const m={table:"WordList_table__1vw7i"};function f(){const{deleteWord:t,updateWord:e}=function(){const t=(0,a.jE)(),e=(0,o.n)(r.I0,{onSuccess:()=>{t.invalidateQueries(["words"]),t.invalidateQueries(["trainWords"]),t.invalidateQueries(["vocabWords"])}}),s=(0,o.n)(r.ob,{onSuccess:()=>{t.invalidateQueries(["words"]),t.invalidateQueries(["trainWords"]),t.invalidateQueries(["vocabWords"])}});return{deleteWord:e.mutate,updateWord:s.mutate,isDeleting:e.isLoading,isUpdating:s.isLoading,deleteError:e.error,updateError:s.error}}(),{data:s=[],isLoading:n}=(0,i.I)(["words"],r.qi,{staleTime:3e5,refetchOnWindowFocus:!1});return n?(0,g.jsx)("p",{className:m.loading,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043b\u043e\u0432\u2026"}):(0,g.jsxs)("table",{className:m.table,children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{children:"\u0421\u043b\u043e\u0432\u043e"}),(0,g.jsx)("th",{children:"\u0422\u0440\u0430\u043d\u0441\u043a\u0440\u0438\u043f\u0446\u0438\u044f"}),(0,g.jsx)("th",{children:"\u041f\u0435\u0440\u0435\u0432\u043e\u0434"}),(0,g.jsx)("th",{children:"\u0422\u0435\u043c\u0430"}),(0,g.jsx)("th",{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})]})}),(0,g.jsx)("tbody",{children:s.map((s=>(0,g.jsx)(p,{word:s,onDelete:()=>t(s.id),onSave:t=>e(t)},s.id)))})]})}const S="HomePage_homePage__aSn5X",x="HomePage_title__y-VCo";const b=function(){return(0,g.jsxs)("div",{className:S,children:[(0,g.jsx)("h2",{className:x,children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0441\u043b\u043e\u0432"}),(0,g.jsx)(f,{})]})}},766:(t,e,s)=>{s.d(e,{I0:()=>u,KW:()=>o,Kk:()=>a,ob:()=>l,qi:()=>c});var n=s(213);const i="https://itgirlschool.justmakeit.ru/api",r="addedWords",a="deletedWords";async function o(t){const e=await function(t){return n.A.post(`${i}/words`,t).then((t=>t.data))}(t),s={id:"number"===typeof e.id?e.id:`local-${Date.now()}`,english:t.english,transcription:t.transcription,russian:t.russian,tags:t.tags},a=JSON.parse(localStorage.getItem(r)||"[]");return localStorage.setItem(r,JSON.stringify([...a,s])),s}async function l(t){const e=await function(t){return n.A.put(`${i}/words/${t.id}`,t).then((t=>t.data))}(t),s="number"===typeof e.id?e.id:t.id,a={id:s,english:t.english,transcription:t.transcription,russian:t.russian,tags:t.tags},o=JSON.parse(localStorage.getItem(r)||"[]").filter((t=>String(t.id)!==String(s)));return localStorage.setItem(r,JSON.stringify([...o,a])),a}async function u(t){String(t).startsWith("local-")||await function(t){return n.A.delete(`${i}/words/${t}`)}(t);const e=JSON.parse(localStorage.getItem(r)||"[]").filter((e=>String(e.id)!==String(t)));localStorage.setItem(r,JSON.stringify(e));const s=JSON.parse(localStorage.getItem(a)||"[]");return s.includes(String(t))||(s.push(String(t)),localStorage.setItem(a,JSON.stringify(s))),t}async function c(){const t=await n.A.get(`${i}/words`).then((t=>t.data)),e=JSON.parse(localStorage.getItem(a)||"[]"),s=JSON.parse(localStorage.getItem(r)||"[]"),o=t.filter((t=>!e.includes(String(t.id))));return[...o.map((t=>s.find((e=>String(e.id)===String(t.id)))||t)),...s.filter((t=>!o.find((e=>String(e.id)===String(t.id)))))]}},836:(t,e,s)=>{s.d(e,{n:()=>h});var n=s(43),i=s(664),r=s(116),a=s(939),o=s(78);class l extends o.Q{constructor(t,e){super(),this.client=t,this.setOptions(e),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var e;const s=this.options;this.options=this.client.defaultMutationOptions(t),(0,i.f8)(s,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(e=this.currentMutation)||e.setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(null==(t=this.currentMutation)||t.removeObserver(this))}onMutationUpdate(t){this.updateResult();const e={listeners:!0};"success"===t.type?e.onSuccess=!0:"error"===t.type&&(e.onError=!0),this.notify(e)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(t,e){return this.mutateOptions=e,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:"undefined"!==typeof t?t:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const t=this.currentMutation?this.currentMutation.state:(0,r.$)(),e={...t,isLoading:"loading"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset};this.currentResult=e}notify(t){a.j.batch((()=>{var e,s,n,i;if(this.mutateOptions&&this.hasListeners())if(t.onSuccess)null==(e=(s=this.mutateOptions).onSuccess)||e.call(s,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(n=(i=this.mutateOptions).onSettled)||n.call(i,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context);else if(t.onError){var r,a,o,l;null==(r=(a=this.mutateOptions).onError)||r.call(a,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(o=(l=this.mutateOptions).onSettled)||o.call(l,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}t.listeners&&this.listeners.forEach((t=>{let{listener:e}=t;e(this.currentResult)}))}))}}var u=s(873),c=s(781),d=s(84);function h(t,e,s){const r=(0,i.GR)(t,e,s),o=(0,c.jE)({context:r.context}),[h]=n.useState((()=>new l(o,r)));n.useEffect((()=>{h.setOptions(r)}),[h,r]);const p=(0,u.r)(n.useCallback((t=>h.subscribe(a.j.batchCalls(t))),[h]),(()=>h.getCurrentResult()),(()=>h.getCurrentResult())),m=n.useCallback(((t,e)=>{h.mutate(t,e).catch(g)}),[h]);if(p.error&&(0,d.G)(h.options.useErrorBoundary,[p.error]))throw p.error;return{...p,mutate:m,mutateAsync:p.mutate}}function g(){}}}]);
//# sourceMappingURL=205.3ffdbf8f.chunk.js.map