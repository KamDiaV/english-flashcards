"use strict";(self.webpackChunkenglish_flashcards=self.webpackChunkenglish_flashcards||[]).push([[237],{237:(e,t,n)=>{n.r(t),n.d(t,{default:()=>j});var r=n(43),a=n(604),s=n(180),i=n(766),l=n(546),o=n(487),c=n(781),d=n(659);const u={cardWrapper:"WordCard_cardWrapper__BkaY6",card:"WordCard_card__XVCKE",isFlipped:"WordCard_isFlipped__1xL4n",cardFront:"WordCard_cardFront__U2arg",cardBack:"WordCard_cardBack__F0fLW",english:"WordCard_english__x1BCx",transcription:"WordCard_transcription__HYDQx",translation:"WordCard_translation__Z6buB"};var g=n(579);function m(e){let{english:t,transcription:n,russian:a}=e;const[s,i]=(0,r.useState)(!1);return(0,g.jsx)("div",{className:u.cardWrapper,onClick:()=>i((e=>!e)),children:(0,g.jsxs)("div",{className:`${u.card} ${s?u.isFlipped:""}`,children:[(0,g.jsxs)("div",{className:u.cardFront,children:[(0,g.jsx)("p",{className:u.english,children:t}),(0,g.jsx)("p",{className:u.transcription,children:n})]}),(0,g.jsx)("div",{className:u.cardBack,children:(0,g.jsx)("p",{className:u.translation,children:a})})]})})}const _={container:"FlipCardGame_container__GniVu",cardWrapper:"FlipCardGame_cardWrapper__YDChr",cardMotion:"FlipCardGame_cardMotion__HaDfj",checkButton:"FlipCardGame_checkButton__Fe4aW",controls:"FlipCardGame_controls__-8Zfl",status:"FlipCardGame_status__xZIgv"};function p(e){var t;let{words:n}=e;const[a,s]=(0,r.useState)(0),[i,u]=(0,r.useState)(1),[p,h]=(0,r.useState)(!1),f=(0,c.jE)(),N=Array.isArray(n)&&n.length>0?Math.min(a,n.length-1):0,x=Array.isArray(n)&&n.length>0?n[N]:{id:null,english:"",transcription:"",russian:""},[S,j]=(0,d.p)(null!==(t=x.id)&&void 0!==t?t:""),v=(0,r.useCallback)((()=>{Array.isArray(n)&&0!==n.length&&0!==N&&(u(-1),s((e=>e-1)))}),[N,n]),k=(0,r.useCallback)((()=>{Array.isArray(n)&&0!==n.length&&N!==n.length-1&&(u(1),s((e=>e+1)))}),[N,n]);(0,r.useEffect)((()=>{function e(e){"ArrowLeft"===e.key?(e.preventDefault(),v()):"ArrowRight"===e.key&&(e.preventDefault(),k())}return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[v,k]);return(0,g.jsx)("div",{className:_.container,children:Array.isArray(n)&&0!==n.length?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:_.cardWrapper,children:(0,g.jsx)(l.N,{initial:!1,custom:i,children:(0,g.jsx)(o.P.div,{custom:i,variants:{enter:e=>({rotateY:e>0?90:-90,opacity:0,transformOrigin:e>0?"left center":"right center"}),center:{rotateY:0,opacity:1,transformOrigin:"center center",transition:{duration:.5}},exit:e=>({rotateY:e>0?-90:90,opacity:0,transformOrigin:e>0?"right center":"left center",transition:{duration:.4}})},initial:"enter",animate:p?"exit":"center",exit:"exit",transition:{duration:.5},className:_.cardMotion,onAnimationComplete:function(e){p&&"exit"===e&&(h(!1),k())},children:(0,g.jsx)(m,{english:x.english,transcription:x.transcription,russian:x.russian})},x.id)})}),(0,g.jsx)("button",{className:_.checkButton,onClick:function(){j({knownByUser:!0}),f.invalidateQueries(["trainWords"]),f.invalidateQueries(["vocabWords"]),h(!0)},disabled:p,children:"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043a\u0430\u043a \u0437\u043d\u0430\u044e"}),(0,g.jsxs)("div",{className:_.controls,children:[(0,g.jsx)("button",{onClick:v,disabled:0===N,children:"\u2190"}),(0,g.jsx)("button",{onClick:k,disabled:N===n.length-1,children:"\u2192"})]})]}):(0,g.jsx)("p",{className:_.status,children:"\u041d\u0435\u0442 \u0441\u043b\u043e\u0432 \u0434\u043b\u044f \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0438."})})}const h={container:"TestGame_container__e9FZj",toggle:"TestGame_toggle__Ifs4q",active:"TestGame_active__Q8aoc",prompt:"TestGame_prompt__8FeNC",status:"TestGame_status__OmgM9",progress:"TestGame_progress__kypA8",options:"TestGame_options__xzqZ5",correct:"TestGame_correct__Dy2kQ",wrong:"TestGame_wrong__DXFhV",footer:"TestGame_footer__HMyGn",ok:"TestGame_ok__EmJ-y",err:"TestGame_err__HfNYS",nextButton:"TestGame_nextButton__AQWDm",resetButton:"TestGame_resetButton__aA33-",celebration:"TestGame_celebration__nen-4",pop:"TestGame_pop__WzoRN"};function f(e){return e.map((e=>({sort:Math.random(),value:e}))).sort(((e,t)=>e.sort-t.sort)).map((e=>e.value))}function N(e){var t;let{words:n}=e;const s=(0,c.jE)(),[l,o]=(0,r.useState)(!1),[u,m]=(0,r.useState)(null),[_,p]=(0,r.useState)(0),[N,x]=(0,r.useState)(null),[S,j]=(0,r.useState)(null),[v,k]=(0,r.useState)("en-ru"),{data:y=[],isLoading:C,isError:w}=(0,a.I)(["wordsFull"],i.qi,{refetchOnWindowFocus:!1,staleTime:3e5}),b=!Array.isArray(n)||0===n.length,W=b?0:Math.min(_,n.length-1),B=b?null:n[W],T=null!==(t=null===B||void 0===B?void 0:B.id)&&void 0!==t?t:null;(0,r.useEffect)((()=>{o(!1),m(null),x(null),j(null)}),[T]);const[A,O]=(0,d.p)(T),{correctStreak:I=0,knownByUser:G=!1}=A,F=(0,r.useMemo)((()=>{if(b)return[];const e=f(y.filter((e=>e.id!==B.id)).map((e=>"en-ru"===v?e.russian:e.english))).slice(0,3);return f(["en-ru"===v?B.russian:B.english,...e])}),[y,B,v,b]);if(C)return(0,g.jsx)("p",{className:h.status,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u043e\u0432\u2026"});if(w)return(0,g.jsx)("p",{className:h.status,children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u043e\u0432"});if(b||G&&!l)return(0,g.jsx)("p",{className:h.status,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e \u0441\u043b\u043e\u0432\u0430\u2026"});const J=("en-ru"===v?B.russian:B.english).toLowerCase(),M=null!==u&&void 0!==u?u:I,P=Math.min(M,5);return(0,g.jsxs)("div",{className:h.container,onClick:()=>{l&&(o(!1),m(null),x(null),j(null),s.invalidateQueries(["trainWords"]),s.invalidateQueries(["vocabWords"]))},children:[(0,g.jsxs)("div",{className:h.toggle,children:[(0,g.jsx)("button",{className:"en-ru"===v?h.active:"",onClick:()=>k("en-ru"),children:" \u0410\u043d\u0433\u043b \u2192 \u0420\u0443\u0441 "}),(0,g.jsx)("button",{className:"ru-en"===v?h.active:"",onClick:()=>k("ru-en"),children:" \u0420\u0443\u0441 \u2192 \u0410\u043d\u0433\u043b "})]}),(0,g.jsx)("p",{className:h.prompt,children:"en-ru"===v?B.english:B.russian}),(0,g.jsxs)("div",{className:h.progress,children:[(0,g.jsx)("progress",{value:P,max:5}),(0,g.jsxs)("span",{children:[P,"/5"]})]}),(0,g.jsx)("div",{className:h.options,children:F.map((e=>(0,g.jsx)("button",{disabled:null!==N||l,onClick:t=>{t.stopPropagation(),(e=>{x(e);const t=e.toLowerCase()===J;j(t);const n=t?I+1:0,r={correctStreak:n};n>=5&&(r.knownByUser=!0),O(r),t&&n>=5?(o(!0),m(n)):(s.invalidateQueries(["trainWords"]),s.invalidateQueries(["vocabWords"]))})(e)},className:null===N?"":e.toLowerCase()===J?h.correct:e===N?h.wrong:"",children:e},e)))}),l&&(0,g.jsx)("div",{className:h.celebration,children:"\ud83c\udf89\ud83c\udf86 \u041e\u0442\u043b\u0438\u0447\u043d\u043e! \u0421\u043b\u043e\u0432\u043e \u0432\u044b\u0443\u0447\u0435\u043d\u043e! \ud83c\udf86\ud83c\udf89"}),!l&&null!==N&&(0,g.jsxs)("div",{className:h.footer,children:[(0,g.jsx)("p",{className:S?h.ok:h.err,children:S?"\u2705 \u041f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e!":`\u274c \u041d\u0435\u0432\u0435\u0440\u043d\u043e, \u043e\u0442\u0432\u0435\u0442: ${"en-ru"===v?B.russian:B.english}`}),(0,g.jsx)("button",{onClick:()=>{x(null),j(null),W<n.length-1&&p((e=>e+1))},disabled:W===n.length-1,className:h.nextButton,children:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435 \u2192"}),W===n.length-1&&(0,g.jsx)("button",{onClick:()=>{p(0),x(null),j(null)},className:h.resetButton,children:"\u041d\u0430\u0447\u0430\u0442\u044c \u0441\u043d\u0430\u0447\u0430\u043b\u0430"})]})]})}const x={page:"TrainPage_page__u8WhA",backToMenu:"TrainPage_backToMenu__amtXq",title:"TrainPage_title__I2fxj",selection:"TrainPage_selection__2ZQak",largeButton:"TrainPage_largeButton__9O7Yt",status:"TrainPage_status__+Msm4",emptyActions:"TrainPage_emptyActions__kKJYN",linkButton:"TrainPage_linkButton__5cR9L"};async function S(){const e=await(0,i.qi)(),t=JSON.parse(localStorage.getItem("vocabProgress")||"{}"),n=JSON.parse(localStorage.getItem(i.Kk)||"[]");return e.filter((e=>{var r;return!(null!==(r=t[e.id])&&void 0!==r&&r.knownByUser)&&!n.includes(String(e.id))}))}function j(){const[e,t]=(0,r.useState)(null),{data:n=[],isLoading:i,isError:l}=(0,a.I)(["trainWords",e],S,{enabled:Boolean(e),refetchOnWindowFocus:!1,staleTime:3e5});return null===e?(0,g.jsxs)("div",{className:x.page,children:[(0,g.jsx)("h2",{className:x.title,children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u0435\u0436\u0438\u043c"}),(0,g.jsxs)("div",{className:x.selection,children:[(0,g.jsx)("button",{className:x.largeButton,onClick:()=>t("flip"),children:"\u041f\u0435\u0440\u0435\u0432\u0435\u0440\u043d\u0438 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443"}),(0,g.jsx)("button",{className:x.largeButton,onClick:()=>t("test"),children:"\u0422\u0435\u0441\u0442"})]})]}):i?(0,g.jsx)("p",{className:x.status,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043b\u043e\u0432\u2026"}):l?(0,g.jsx)("p",{className:x.status,children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435"}):0===n.length?(0,g.jsxs)("div",{className:x.page,children:[(0,g.jsx)("h2",{className:x.status,children:"\u041f\u043e\u0437\u0434\u0440\u0430\u0432\u043b\u044f\u0435\u043c, \u0432\u0441\u0435 \u0441\u043b\u043e\u0432\u0430 \u0432\u044b\u0443\u0447\u0435\u043d\u044b! \ud83c\udf89"}),(0,g.jsxs)("div",{className:x.emptyActions,children:[(0,g.jsx)(s.N_,{to:"/vocab",className:x.linkButton,children:"\u041c\u043e\u0439 \u0441\u043b\u043e\u0432\u0430\u0440\u043d\u044b\u0439 \u0437\u0430\u043f\u0430\u0441"}),(0,g.jsx)(s.N_,{to:"/add",className:x.linkButton,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430"})]})]}):(0,g.jsxs)("div",{className:x.page,children:[(0,g.jsx)("button",{className:x.backToMenu,onClick:()=>t(null),children:"\u2190 \u041d\u0430\u0437\u0430\u0434 \u043a \u0432\u044b\u0431\u043e\u0440\u0443 \u0440\u0435\u0436\u0438\u043c\u0430"}),"flip"===e?(0,g.jsx)(p,{words:n}):(0,g.jsx)(N,{words:n})]})}},659:(e,t,n)=>{n.d(t,{R:()=>l,p:()=>i});var r=n(43);const a="vocabProgress",s={correctStreak:0,knownByUser:!1};function i(e){const[t,n]=(0,r.useState)(s);(0,r.useEffect)((()=>{const t=JSON.parse(localStorage.getItem(a)||"{}");n(t[e]||s)}),[e]);return[t,t=>{n((n=>{const r={...n,...t},s=JSON.parse(localStorage.getItem(a)||"{}");return s[e]=r,localStorage.setItem(a,JSON.stringify(s)),r}))},()=>{n(s);const t=JSON.parse(localStorage.getItem(a)||"{}");delete t[e],localStorage.setItem(a,JSON.stringify(t))}]}function l(e){const t=JSON.parse(localStorage.getItem(a)||"{}");delete t[e],localStorage.setItem(a,JSON.stringify(t))}},766:(e,t,n)=>{n.d(t,{I0:()=>c,KW:()=>l,Kk:()=>i,ob:()=>o,qi:()=>d});var r=n(213);const a="https://itgirlschool.justmakeit.ru/api",s="addedWords",i="deletedWords";async function l(e){const t=await function(e){return r.A.post(`${a}/words`,e).then((e=>e.data))}(e),n={id:"number"===typeof t.id?t.id:`local-${Date.now()}`,english:e.english,transcription:e.transcription,russian:e.russian,tags:e.tags},i=JSON.parse(localStorage.getItem(s)||"[]");return localStorage.setItem(s,JSON.stringify([...i,n])),n}async function o(e){const t=await function(e){return r.A.put(`${a}/words/${e.id}`,e).then((e=>e.data))}(e),n="number"===typeof t.id?t.id:e.id,i={id:n,english:e.english,transcription:e.transcription,russian:e.russian,tags:e.tags},l=JSON.parse(localStorage.getItem(s)||"[]").filter((e=>String(e.id)!==String(n)));return localStorage.setItem(s,JSON.stringify([...l,i])),i}async function c(e){String(e).startsWith("local-")||await function(e){return r.A.delete(`${a}/words/${e}`)}(e);const t=JSON.parse(localStorage.getItem(s)||"[]").filter((t=>String(t.id)!==String(e)));localStorage.setItem(s,JSON.stringify(t));const n=JSON.parse(localStorage.getItem(i)||"[]");return n.includes(String(e))||(n.push(String(e)),localStorage.setItem(i,JSON.stringify(n))),e}async function d(){const e=await r.A.get(`${a}/words`).then((e=>e.data)),t=JSON.parse(localStorage.getItem(i)||"[]"),n=JSON.parse(localStorage.getItem(s)||"[]"),l=e.filter((e=>!t.includes(String(e.id))));return[...l.map((e=>n.find((t=>String(t.id)===String(e.id)))||e)),...n.filter((e=>!l.find((t=>String(t.id)===String(e.id)))))]}}}]);
//# sourceMappingURL=237.c8c71be7.chunk.js.map