"use strict";(self.webpackChunkenglish_flashcards=self.webpackChunkenglish_flashcards||[]).push([[494],{2836:(t,e,s)=>{s.d(e,{n:()=>h});var n=s(5043),r=s(8664),i=s(116),a=s(9939),o=s(2078);class u extends o.Q{constructor(t,e){super(),this.client=t,this.setOptions(e),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var e;const s=this.options;this.options=this.client.defaultMutationOptions(t),(0,r.f8)(s,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(e=this.currentMutation)||e.setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(null==(t=this.currentMutation)||t.removeObserver(this))}onMutationUpdate(t){this.updateResult();const e={listeners:!0};"success"===t.type?e.onSuccess=!0:"error"===t.type&&(e.onError=!0),this.notify(e)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(t,e){return this.mutateOptions=e,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:"undefined"!==typeof t?t:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const t=this.currentMutation?this.currentMutation.state:(0,i.$)(),e={...t,isLoading:"loading"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset};this.currentResult=e}notify(t){a.j.batch((()=>{var e,s,n,r;if(this.mutateOptions&&this.hasListeners())if(t.onSuccess)null==(e=(s=this.mutateOptions).onSuccess)||e.call(s,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(n=(r=this.mutateOptions).onSettled)||n.call(r,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context);else if(t.onError){var i,a,o,u;null==(i=(a=this.mutateOptions).onError)||i.call(a,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(o=(u=this.mutateOptions).onSettled)||o.call(u,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}t.listeners&&this.listeners.forEach((t=>{let{listener:e}=t;e(this.currentResult)}))}))}}var l=s(8873),c=s(9781),d=s(4084);function h(t,e,s){const i=(0,r.GR)(t,e,s),o=(0,c.jE)({context:i.context}),[h]=n.useState((()=>new u(o,i)));n.useEffect((()=>{h.setOptions(i)}),[h,i]);const p=(0,l.r)(n.useCallback((t=>h.subscribe(a.j.batchCalls(t))),[h]),(()=>h.getCurrentResult()),(()=>h.getCurrentResult())),m=n.useCallback(((t,e)=>{h.mutate(t,e).catch(g)}),[h]);if(p.error&&(0,d.G)(h.options.useErrorBoundary,[p.error]))throw p.error;return{...p,mutate:m,mutateAsync:p.mutate}}function g(){}},6494:(t,e,s)=>{s.r(e),s.d(e,{default:()=>b});var n=s(5043),r=s(5604),i=s(9766),a=s(9781),o=s(2836);const u="WordRow_row__4-rHQ",l="WordRow_input__dVTgS",c="WordRow_errorInput__SwX5M",d="WordRow_actions__9BBdR",h="WordRow_button__vftN3";var g=s(579);function p(t){let{word:e,onSave:s,onDelete:r}=t;const[i,a]=(0,n.useState)(!1),[o,p]=(0,n.useState)(e),m=i&&!o.english.trim(),f=i&&!o.russian.trim();(0,n.useEffect)((()=>{i&&p(e)}),[i,e]);const S=t=>{const{name:e,value:s}=t.target;p((t=>({...t,[e]:s})))};return(0,g.jsx)("tr",{className:u,children:i?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("td",{children:(0,g.jsx)("input",{name:"english",value:o.english,onChange:S,className:`${l} ${m?c:""}`})}),(0,g.jsx)("td",{children:(0,g.jsx)("input",{name:"transcription",value:o.transcription,onChange:S,className:l})}),(0,g.jsx)("td",{children:(0,g.jsx)("input",{name:"russian",value:o.russian,onChange:S,className:`${l} ${f?c:""}`})}),(0,g.jsx)("td",{children:(0,g.jsx)("input",{name:"tags",value:o.tags||"",onChange:S,className:l})}),(0,g.jsxs)("td",{className:d,children:[(0,g.jsx)("button",{onClick:()=>{m||f||(s(o),a(!1))},className:h,disabled:m||f,children:"\ud83d\udcbe"}),(0,g.jsx)("button",{onClick:()=>{a(!1),p(e)},className:h,children:"\u274c"})]})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("td",{children:e.english}),(0,g.jsx)("td",{children:e.transcription||"\u2014"}),(0,g.jsx)("td",{children:e.russian}),(0,g.jsx)("td",{children:e.tags||"\u2014"}),(0,g.jsxs)("td",{className:d,children:[(0,g.jsx)("button",{onClick:()=>a(!0),className:h,children:"\u270f\ufe0f"}),(0,g.jsx)("button",{onClick:r,className:h,children:"\ud83d\uddd1"})]})]})})}var m=s(6232);const f="WordList_table__9l5tk";function S(){const{deleteWord:t,updateWord:e}=function(){const t=(0,a.jE)(),e=(0,o.n)(i.I0,{onSuccess:()=>{t.invalidateQueries(["words"]),t.invalidateQueries(["trainWords"]),t.invalidateQueries(["vocabWords"])}}),s=(0,o.n)(i.ob,{onSuccess:()=>{t.invalidateQueries(["words"]),t.invalidateQueries(["trainWords"]),t.invalidateQueries(["vocabWords"])}});return{deleteWord:e.mutate,updateWord:s.mutate,isDeleting:e.isLoading,isUpdating:s.isLoading,deleteError:e.error,updateError:s.error}}(),{data:s=[],isLoading:n}=(0,r.I)(["words"],i.qi,{staleTime:3e5,refetchOnWindowFocus:!1});return n?(0,g.jsx)(m.A,{}):(0,g.jsxs)("table",{className:f,children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{children:"\u0421\u043b\u043e\u0432\u043e"}),(0,g.jsx)("th",{children:"\u0422\u0440\u0430\u043d\u0441\u043a\u0440\u0438\u043f\u0446\u0438\u044f"}),(0,g.jsx)("th",{children:"\u041f\u0435\u0440\u0435\u0432\u043e\u0434"}),(0,g.jsx)("th",{children:"\u0422\u0435\u043c\u0430"}),(0,g.jsx)("th",{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})]})}),(0,g.jsx)("tbody",{children:s.map((s=>(0,g.jsx)(p,{word:s,onDelete:()=>t(s.id),onSave:t=>e(t)},s.id)))})]})}const v="HomePage_homePage__FhwvF",x="HomePage_title__ygULj";const b=function(){return(0,g.jsxs)("div",{className:v,children:[(0,g.jsx)("h2",{className:x,children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0441\u043b\u043e\u0432"}),(0,g.jsx)(S,{})]})}},9766:(t,e,s)=>{s.d(e,{I0:()=>l,KW:()=>o,Kk:()=>a,ob:()=>u,qi:()=>c});var n=s(6213);const r="https://itgirlschool.justmakeit.ru/api",i="addedWords",a="deletedWords";async function o(t){const e=await function(t){return n.A.post(`${r}/words`,t).then((t=>t.data))}(t),s={id:"number"===typeof e.id?e.id:`local-${Date.now()}`,english:t.english,transcription:t.transcription,russian:t.russian,tags:t.tags},a=JSON.parse(localStorage.getItem(i)||"[]");return localStorage.setItem(i,JSON.stringify([...a,s])),s}async function u(t){const e=await function(t){return n.A.put(`${r}/words/${t.id}`,t).then((t=>t.data))}(t),s="number"===typeof e.id?e.id:t.id,a={id:s,english:t.english,transcription:t.transcription,russian:t.russian,tags:t.tags},o=JSON.parse(localStorage.getItem(i)||"[]").filter((t=>String(t.id)!==String(s)));return localStorage.setItem(i,JSON.stringify([...o,a])),a}async function l(t){String(t).startsWith("local-")||await function(t){return n.A.delete(`${r}/words/${t}`)}(t);const e=JSON.parse(localStorage.getItem(i)||"[]").filter((e=>String(e.id)!==String(t)));localStorage.setItem(i,JSON.stringify(e));const s=JSON.parse(localStorage.getItem(a)||"[]");return s.includes(String(t))||(s.push(String(t)),localStorage.setItem(a,JSON.stringify(s))),t}async function c(){const t=await n.A.get(`${r}/words`).then((t=>t.data)),e=JSON.parse(localStorage.getItem(a)||"[]"),s=JSON.parse(localStorage.getItem(i)||"[]"),o=t.filter((t=>!e.includes(String(t.id))));return[...o.map((t=>s.find((e=>String(e.id)===String(t.id)))||t)),...s.filter((t=>!o.find((e=>String(e.id)===String(t.id)))))]}}}]);
//# sourceMappingURL=494.214d3fad.chunk.js.map